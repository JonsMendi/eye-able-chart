{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\JonsMendi\\\\Desktop\\\\Personal\\\\Coding-Challenges\\\\eye-able-chart\\\\eye-able-chart\\\\src\\\\components\\\\App.jsx\",\n  _s = $RefreshSig$();\nimport \"../App.css\";\nimport { useState, useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [population, setPopulation] = useState([]);\n  const [yearFilter, setYearFilter] = useState(null);\n  const svgRef = useRef(null);\n  async function fetchPopulation() {\n    const response = await fetch(\"https://datausa.io/api/data?drilldowns=Nation&measures=Population\");\n    const data = await response.json();\n    setPopulation(data.data);\n  }\n  useEffect(() => {\n    fetchPopulation();\n  }, []);\n  useEffect(() => {\n    const svg = d3.select(svgRef.current);\n    const width = svg.attr(\"width\");\n    const height = svg.attr(\"height\");\n    const margin = {\n      top: 20,\n      right: 20,\n      bottom: 30,\n      left: 40\n    };\n    const chartWidth = width - margin.left - margin.right;\n    const chartHeight = height - margin.top - margin.bottom;\n    const x = d3.scaleBand().range([0, chartWidth]).padding(0.1).domain(population.map(d => d.Year));\n    const y = d3.scaleLinear().range([chartHeight, 0]).domain([0, d3.max(population, d => d.Population)]);\n    const xAxis = d3.axisBottom(x);\n    const yAxis = d3.axisLeft(y);\n    svg.select(\".x-axis\").attr(\"transform\", `translate(0, ${chartHeight})`).call(xAxis);\n    svg.select(\".y-axis\").call(yAxis);\n    svg.selectAll(\".bar\").data(population).join(\"rect\").attr(\"class\", \"bar\").attr(\"x\", d => x(d.Year)).attr(\"y\", d => y(d.Population)).attr(\"width\", x.bandwidth()).attr(\"height\", d => chartHeight - y(d.Population));\n  }, [population, yearFilter]);\n  function handleYearFilterChange(event) {\n    setYearFilter(parseInt(event.target.value));\n  }\n  const filteredPopulation = population.filter(item => yearFilter ? new Date(item.Year).getFullYear() >= new Date().getFullYear() - yearFilter : true);\n  const renderPopulation = filteredPopulation.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      children: [\"Country: \", item.Nation]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      children: [\"Population: \", item.Population]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      children: [\"Year: \", item.Year]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, index, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"USA Population\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Filter by year:\", /*#__PURE__*/_jsxDEV(\"select\", {\n        defaultValue: \"\",\n        onChange: handleYearFilterChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: null,\n          children: \"All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 3,\n          children: \"Last 3 years\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 5,\n          children: \"Last 5 years\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 10,\n          children: \"Last 10 years\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: renderPopulation\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef,\n      width: 500,\n      height: 300,\n      children: [/*#__PURE__*/_jsxDEV(\"g\", {\n        className: \"x-axis\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n        className: \"y-axis\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"6fTE4L/+mbsCiezo8EZNP1tySJo=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","useRef","d3","jsxDEV","_jsxDEV","App","_s","population","setPopulation","yearFilter","setYearFilter","svgRef","fetchPopulation","response","fetch","data","json","svg","select","current","width","attr","height","margin","top","right","bottom","left","chartWidth","chartHeight","x","scaleBand","range","padding","domain","map","d","Year","y","scaleLinear","max","Population","xAxis","axisBottom","yAxis","axisLeft","call","selectAll","join","bandwidth","handleYearFilterChange","event","parseInt","target","value","filteredPopulation","filter","item","Date","getFullYear","renderPopulation","index","children","Nation","fileName","_jsxFileName","lineNumber","columnNumber","className","defaultValue","onChange","ref","_c","$RefreshReg$"],"sources":["C:/Users/JonsMendi/Desktop/Personal/Coding-Challenges/eye-able-chart/eye-able-chart/src/components/App.jsx"],"sourcesContent":["import \"../App.css\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport * as d3 from \"d3\";\r\n\r\nfunction App() {\r\n  const [population, setPopulation] = useState([]);\r\n  const [yearFilter, setYearFilter] = useState(null);\r\n  const svgRef = useRef(null);\r\n\r\n  async function fetchPopulation() {\r\n    const response = await fetch(\r\n      \"https://datausa.io/api/data?drilldowns=Nation&measures=Population\"\r\n    );\r\n    const data = await response.json();\r\n    setPopulation(data.data);\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchPopulation();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const svg = d3.select(svgRef.current);\r\n    const width = svg.attr(\"width\");\r\n    const height = svg.attr(\"height\");\r\n\r\n    const margin = { top: 20, right: 20, bottom: 30, left: 40 };\r\n    const chartWidth = width - margin.left - margin.right;\r\n    const chartHeight = height - margin.top - margin.bottom;\r\n\r\n    const x = d3\r\n      .scaleBand()\r\n      .range([0, chartWidth])\r\n      .padding(0.1)\r\n      .domain(population.map((d) => d.Year));\r\n\r\n    const y = d3\r\n      .scaleLinear()\r\n      .range([chartHeight, 0])\r\n      .domain([0, d3.max(population, (d) => d.Population)]);\r\n\r\n    const xAxis = d3.axisBottom(x);\r\n    const yAxis = d3.axisLeft(y);\r\n\r\n    svg.select(\".x-axis\")\r\n      .attr(\"transform\", `translate(0, ${chartHeight})`)\r\n      .call(xAxis);\r\n\r\n    svg.select(\".y-axis\").call(yAxis);\r\n\r\n    svg.selectAll(\".bar\")\r\n      .data(population)\r\n      .join(\"rect\")\r\n      .attr(\"class\", \"bar\")\r\n      .attr(\"x\", (d) => x(d.Year))\r\n      .attr(\"y\", (d) => y(d.Population))\r\n      .attr(\"width\", x.bandwidth())\r\n      .attr(\"height\", (d) => chartHeight - y(d.Population));\r\n  }, [population, yearFilter]);\r\n\r\n  function handleYearFilterChange(event) {\r\n    setYearFilter(parseInt(event.target.value));\r\n  }\r\n\r\n  const filteredPopulation = population.filter(\r\n    (item) =>\r\n      yearFilter\r\n        ? new Date(item.Year).getFullYear() >=\r\n          new Date().getFullYear() - yearFilter\r\n        : true\r\n  );\r\n\r\n  const renderPopulation = filteredPopulation.map((item, index) => (\r\n    <div key={index}>\r\n      <span>Country: {item.Nation}</span>\r\n      <span>Population: {item.Population}</span>\r\n      <span>Year: {item.Year}</span>\r\n    </div>\r\n  ));\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <h1>USA Population</h1>\r\n      <label>\r\n        Filter by year:\r\n        <select defaultValue=\"\" onChange={handleYearFilterChange}>\r\n          <option value={null}>All</option>\r\n          <option value={3}>Last 3 years</option>\r\n          <option value={5}>Last 5 years</option>\r\n          <option value={10}>Last 10 years</option>\r\n        </select>\r\n      </label>\r\n      <div>{renderPopulation}</div>\r\n      <svg ref={svgRef} width={500} height={300}>\r\n        <g className=\"x-axis\" />\r\n        <g className=\"y-axis\" />\r\n      </svg>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}